import{d as I,i as S,A as z,b as $,O as K,r as x,e as q,o as L,f as c,K as P,L as N,k as e,p as o,l as s,w as l,j as u,g as v,v as _,h as E,s as w,m as y,a as Q,P as W,F as G,Q as H,R as J,S as X,T as Z,U as ee,V as ae}from"./index.cafc66af.js";import{d as te,f as U,o as le,a as ue,v as oe}from"./mixin.fa525c43.js";import{A as V}from"./AddItem.4eba5e5b.js";import"./plugin-vueexport-helper.2444895f.js";const ne={key:0},re={key:0},ie={key:0},se={key:0},de={key:0},pe={key:0},me={key:0},ce={key:0},fe={key:0},ge={key:0},ve={class:"text-right"},_e=I({__name:"InfoForm",props:{type:{type:String,default:"view"},id:{type:Number,default:0},path:{type:String,default:""}},emits:["toggleModal"],setup(B,{emit:C}){const m=B,t=S(z),b=$();K(()=>{te()});const f=x(),a=x({id:0,code:"",name:"",uniNo:"",address:"",principalName:"",principalPhone:"",principalEmail:"",establishDate:"",writeoffDate:null,remark:"",webItems:[],emailItems:[],phoneItems:[],faxItems:[]}),h=q(()=>({code:[{required:!0,message:"\u8ACB\u8F38\u5165\u4EE3\u78BC",trigger:"blur"},{min:6,max:10,message:"\u9577\u5EA6\u4ECB\u65BC6~10",trigger:"blur"},{validator:le,trigger:"blur"}],name:[{required:!0,message:"\u8ACB\u8F38\u5165\u540D\u7A31",trigger:"blur"},{max:30,message:"\u6700\u5927\u9577\u5EA6\u70BA30",trigger:"blur"}],uniNo:[{required:!0,message:"\u8ACB\u8F38\u5165\u7D71\u4E00\u7DE8\u865F",trigger:"blur"},{min:6,max:10,message:"\u9577\u5EA6\u4ECB\u65BC6~10",trigger:"blur"},{validator:ue,trigger:"blur"}],address:[{required:!0,message:"\u8ACB\u8F38\u5165\u5730\u5740",trigger:"blur"},{max:255,message:"\u6700\u5927\u9577\u5EA6\u70BA255",trigger:"blur"}],principalName:[{required:!0,message:"\u8ACB\u8F38\u5165\u59D3\u540D",trigger:"blur"},{max:30,message:"\u6700\u5927\u9577\u5EA6\u70BA30",trigger:"blur"}],principalPhone:[{required:!0,message:"\u8ACB\u8F38\u5165\u96FB\u8A71",trigger:"blur"},{max:50,message:"\u6700\u5927\u9577\u5EA6\u70BA50",trigger:"blur"}],principalEmail:[{required:!0,message:"\u8ACB\u8F38\u5165Email",trigger:"blur"},{max:255,message:"\u6700\u5927\u9577\u5EA6\u70BA255",trigger:"blur"},{validator:oe,trigger:"blur"}],establishDate:[{required:!0,message:"\u8ACB\u9078\u64C7",trigger:"change"}],writeoffDate:[]}));return L(async()=>{if(m.id>0){const r=await b.dispatch("getModalData",{http:t,path:m.path,id:m.id});r&&(a.value=r.data)}}),(r,n)=>{const g=c("el-input"),d=c("el-form-item"),F=c("el-date-picker"),k=c("el-button"),A=c("el-form"),D=P("loading");return N((o(),s(A,{ref_key:"formRef",ref:f,model:a.value,rules:h.value,"label-width":"100px"},{default:l(()=>[u(d,{label:"\u516C\u53F8\u4EE3\u865F",prop:"code"},{default:l(()=>[m.type==="view"?(o(),v("label",ne,_(a.value.code),1)):(o(),s(g,{key:1,modelValue:a.value.code,"onUpdate:modelValue":n[0]||(n[0]=i=>a.value.code=i),maxlength:"10",clearable:""},null,8,["modelValue"]))]),_:1}),u(d,{label:"\u516C\u53F8\u540D\u7A31",prop:"name"},{default:l(()=>[m.type==="view"?(o(),v("label",re,_(a.value.name),1)):(o(),s(g,{key:1,modelValue:a.value.name,"onUpdate:modelValue":n[1]||(n[1]=i=>a.value.name=i),clearable:""},null,8,["modelValue"]))]),_:1}),u(d,{label:"\u516C\u53F8\u7D71\u7DE8",prop:"uniNo"},{default:l(()=>[m.type==="view"?(o(),v("label",ie,_(a.value.uniNo),1)):(o(),s(g,{key:1,modelValue:a.value.uniNo,"onUpdate:modelValue":n[2]||(n[2]=i=>a.value.uniNo=i),maxlength:"10",clearable:""},null,8,["modelValue"]))]),_:1}),u(d,{label:"\u516C\u53F8\u5730\u5740",prop:"address"},{default:l(()=>[m.type==="view"?(o(),v("label",se,_(a.value.address),1)):(o(),s(g,{key:1,modelValue:a.value.address,"onUpdate:modelValue":n[3]||(n[3]=i=>a.value.address=i),clearable:""},null,8,["modelValue"]))]),_:1}),u(d,{label:"\u8CA0\u8CAC\u4EBA\u59D3\u540D",prop:"principalName"},{default:l(()=>[m.type==="view"?(o(),v("label",de,_(a.value.principalName),1)):(o(),s(g,{key:1,modelValue:a.value.principalName,"onUpdate:modelValue":n[4]||(n[4]=i=>a.value.principalName=i),clearable:""},null,8,["modelValue"]))]),_:1}),u(d,{label:"\u8CA0\u8CAC\u4EBA\u96FB\u8A71",prop:"principalPhone"},{default:l(()=>[m.type==="view"?(o(),v("label",pe,_(a.value.principalPhone),1)):(o(),s(g,{key:1,modelValue:a.value.principalPhone,"onUpdate:modelValue":n[5]||(n[5]=i=>a.value.principalPhone=i),clearable:""},null,8,["modelValue"]))]),_:1}),u(d,{label:"\u8CA0\u8CAC\u4EBAEmail",prop:"principalEmail"},{default:l(()=>[m.type==="view"?(o(),v("label",me,_(a.value.principalEmail),1)):(o(),s(g,{key:1,modelValue:a.value.principalEmail,"onUpdate:modelValue":n[6]||(n[6]=i=>a.value.principalEmail=i),clearable:""},null,8,["modelValue"]))]),_:1}),u(d,{label:"\u6210\u7ACB\u65E5\u671F",prop:"establishDate"},{default:l(()=>[m.type==="view"?(o(),v("label",ce,_(e(U)(a.value.establishDate)),1)):(o(),s(F,{key:1,modelValue:a.value.establishDate,"onUpdate:modelValue":n[7]||(n[7]=i=>a.value.establishDate=i),type:"date",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD",placeholder:"\u8ACB\u9078\u64C7"},null,8,["modelValue"]))]),_:1}),u(d,{label:"\u8A3B\u92B7\u65E5\u671F",prop:"writeoffDate"},{default:l(()=>[m.type==="view"?(o(),v("label",fe,_(e(U)(a.value.writeoffDate)),1)):(o(),s(F,{key:1,modelValue:a.value.writeoffDate,"onUpdate:modelValue":n[8]||(n[8]=i=>a.value.writeoffDate=i),type:"date",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD",placeholder:"\u8ACB\u9078\u64C7"},null,8,["modelValue"]))]),_:1}),u(d,{label:"\u5099\u8A3B",prop:"remark"},{default:l(()=>[m.type==="view"?(o(),v("label",ge,_(a.value.remark),1)):(o(),s(g,{key:1,modelValue:a.value.remark,"onUpdate:modelValue":n[9]||(n[9]=i=>a.value.remark=i),clearable:""},null,8,["modelValue"]))]),_:1}),u(d,{label:"\u516C\u53F8\u7DB2\u7AD9"},{default:l(()=>[u(V,{arrays:a.value.webItems,"label-title":"\u7DB2\u5740","can-save":m.type!=="view",ref:"web"},null,8,["arrays","can-save"])]),_:1}),u(d,{label:"\u516C\u53F8Email"},{default:l(()=>[u(V,{arrays:a.value.emailItems,"label-title":"Email","can-save":m.type!=="view",keyWord:"email",ref:"email"},null,8,["arrays","can-save"])]),_:1}),u(d,{label:"\u516C\u53F8\u96FB\u8A71"},{default:l(()=>[u(V,{arrays:a.value.phoneItems,"label-title":"\u96FB\u8A71","can-save":m.type!=="view",ref:"phone"},null,8,["arrays","can-save"])]),_:1}),u(d,{label:"\u516C\u53F8\u50B3\u771F"},{default:l(()=>[u(V,{arrays:a.value.faxItems,"label-title":"\u50B3\u771F","can-save":m.type!=="view",ref:"fax"},null,8,["arrays","can-save"])]),_:1}),E("div",ve,[u(k,{onClick:n[10]||(n[10]=i=>C("toggleModal",!1))},{default:l(()=>[w("\u95DC\u9589")]),_:1}),m.type!=="view"?(o(),s(k,{key:0,type:"primary",onClick:n[11]||(n[11]=i=>e(b).dispatch("saveData",{http:e(t),path:B.path,form:a.value,ref:f.value}))},{default:l(()=>[w("\u5132\u5B58")]),_:1})):y("",!0)])]),_:1},8,["model","rules"])),[[D,e(b).state.progressing]])}}}),be=E("div",{class:"card-header"},"\u67E5\u8A62\u689D\u4EF6",-1),ye={class:"grid sm:gap-x-8 sm:grid-cols-2"},Ce={class:"card-header flex justify-between items-center"},he=E("span",null,"\u67E5\u8A62\u7D50\u679C",-1),Ee=I({__name:"InfoView",setup(B){const C=S(z),m=Q(),t=$(),b=x(m.path),f=W({code:"",name:""}),a=q(()=>{const h={page:t.state.page,pageSize:t.state.pageSize};return f.code.length>0&&(h.code=f.code),f.name.length>0&&(h.name=f.name),h});return(h,r)=>{const n=c("el-input"),g=c("el-form-item"),d=c("el-button"),F=c("el-form"),k=c("el-card"),A=c("el-table-column"),D=c("el-tooltip"),i=c("el-button-group"),T=c("el-table"),j=c("el-pagination"),O=c("el-space"),R=c("el-dialog"),Y=P("loading");return o(),v(G,null,[u(O,{size:20,fill:!0,class:"w-full px-4"},{default:l(()=>[N((o(),s(k,{class:"box-card"},{header:l(()=>[be]),default:l(()=>[u(F,{"label-position":"left"},{default:l(()=>[E("div",ye,[u(g,{label:"\u516C\u53F8\u4EE3\u865F",prop:"code"},{default:l(()=>[u(n,{modelValue:f.code,"onUpdate:modelValue":r[0]||(r[0]=p=>f.code=p),placeholder:"\u8F38\u5165\u516C\u53F8\u4EE3\u865F",maxlength:"10",clearable:""},null,8,["modelValue"])]),_:1}),u(g,{label:"\u516C\u53F8\u540D\u7A31",prop:"name"},{default:l(()=>[u(n,{modelValue:f.name,"onUpdate:modelValue":r[1]||(r[1]=p=>f.name=p),placeholder:"\u8F38\u5165\u516C\u53F8\u540D\u7A31",clearable:""},null,8,["modelValue"])]),_:1})]),e(t).state.show.read?(o(),s(d,{key:0,icon:e(H),type:"primary",onClick:r[2]||(r[2]=p=>e(t).dispatch("getData",{http:e(C),path:b.value,data:a.value})),class:"!flex w-full sm:w-56 mx-auto"},{default:l(()=>[w("\u9EDE\u6211\u67E5\u8A62")]),_:1},8,["icon"])):y("",!0)]),_:1})]),_:1})),[[Y,e(t).state.progressing]]),N((o(),s(k,{class:"box-card"},{header:l(()=>[E("div",Ce,[he,e(t).state.show.create?(o(),s(d,{key:0,onClick:r[3]||(r[3]=p=>e(t).dispatch("action",{type:"add",id:0})),icon:e(J),type:"primary",plain:""},{default:l(()=>[w("\u65B0\u589E\u516C\u53F8")]),_:1},8,["icon"])):y("",!0)])]),default:l(()=>[u(T,{data:e(t).state.table,flexible:!0,border:""},{default:l(()=>[u(A,{prop:"code",label:"\u516C\u53F8\u4EE3\u865F"}),u(A,{prop:"name",label:"\u516C\u53F8\u540D\u7A31"}),u(A,{label:"\u64CD\u4F5C",fixed:"right",width:"150",align:"center"},{default:l(p=>[u(i,null,{default:l(()=>[e(t).state.show.detail?y("",!0):(o(),s(d,{key:0,icon:e(X),round:"",disabled:""},{default:l(()=>[w("\u7121\u6B0A\u9650")]),_:1},8,["icon"])),e(t).state.show.detail?(o(),s(D,{key:1,class:"box-item",effect:"dark",content:"\u700F\u89BD",placement:"top","hide-after":0},{default:l(()=>[u(d,{onClick:M=>e(t).dispatch("action",{type:"view",id:p.row.id}),icon:e(Z)},null,8,["onClick","icon"])]),_:2},1024)):y("",!0),e(t).state.show.update?(o(),s(D,{key:2,class:"box-item",effect:"dark",content:"\u7DE8\u8F2F",placement:"top","hide-after":0},{default:l(()=>[u(d,{onClick:M=>e(t).dispatch("action",{type:"edit",id:p.row.id}),icon:e(ee)},null,8,["onClick","icon"])]),_:2},1024)):y("",!0),e(t).state.show.delete?(o(),s(D,{key:3,class:"box-item",effect:"dark",content:"\u522A\u9664",placement:"top","hide-after":0},{default:l(()=>[u(d,{onClick:M=>e(t).dispatch("handleDelete",{http:e(C),path:b.value,data:a.value,row:p.row}),icon:e(ae),type:"danger",plain:""},null,8,["onClick","icon"])]),_:2},1024)):y("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data"]),e(t).state.table.length>0?(o(),s(j,{key:0,onSizeChange:r[4]||(r[4]=p=>e(t).dispatch("handleSizeChange",{http:e(C),path:b.value,data:a.value,val:p})),onCurrentChange:r[5]||(r[5]=p=>e(t).dispatch("handleCurrentChange",{http:e(C),path:b.value,data:a.value,val:p})),"current-page":e(t).state.page,"onUpdate:currentPage":r[6]||(r[6]=p=>e(t).state.page=p),"page-size":e(t).state.pageSize,"onUpdate:pageSize":r[7]||(r[7]=p=>e(t).state.pageSize=p),"page-sizes":[10,25,50,100],total:e(t).state.total,layout:"total, sizes, prev, pager, next",class:"flex flex-wrap justify-center mt-4"},null,8,["current-page","page-size","total"])):y("",!0)]),_:1})),[[Y,e(t).state.progressing]])]),_:1}),u(R,{modelValue:e(t).state.modalOpen,"onUpdate:modelValue":r[9]||(r[9]=p=>e(t).state.modalOpen=p),title:e(t).getters.actionTitle,"append-to-body":!0,"close-on-click-modal":!1,width:"95%",style:{"max-width":"600px"}},{default:l(()=>[(o(),s(_e,{key:e(t).state.actionType+e(t).state.actionId,onToggleModal:r[8]||(r[8]=p=>e(t).commit("updateModalOpen",p)),type:e(t).state.actionType,id:e(t).state.actionId,path:b.value},null,8,["type","id","path"]))]),_:1},8,["modelValue","title"])],64)}}});export{Ee as default};
