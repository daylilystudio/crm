import{d as U,i as B,A as N,b as M,r as S,e as T,o as K,f as i,K as j,L as z,k as e,p as s,l as d,w as l,j as n,g as C,v as F,h as V,s as x,m as g,a as L,P,F as Q,Q as G,R as H,S as J,T as W,U as X,V as Y}from"./index.b0b44b5a.js";import{o as Z}from"./mixin.fa525c43.js";const ee={key:0},te={key:0},ae={key:0},le={class:"text-right"},oe=U({__name:"InfoForm",props:{type:{type:String,default:"view"},id:{type:Number,default:0},path:{type:String,default:""}},emits:["toggleModal"],setup(D,{emit:v}){const m=D,t=B(N),f=M(),p=S(),u=S({id:0,code:"",name:"",activation:!1}),h=T(()=>({code:[{required:!0,message:"Enter \u4EE3\u865F",trigger:"blur"},{max:30,message:"\u6700\u5927\u9577\u5EA6\u70BA30",trigger:"blur"},{validator:Z,trigger:"blur"}],name:[{required:!0,message:"Enter Name",trigger:"blur"},{max:50,message:"\u6700\u5927\u9577\u5EA6\u70BA50",trigger:"blur"}]}));return K(async()=>{if(m.id>0){const a=await f.dispatch("getModalData",{http:t,path:m.path,id:m.id});a&&(u.value=a.data)}}),(a,r)=>{const b=i("el-input"),c=i("el-form-item"),E=i("el-switch"),y=i("el-button"),k=i("el-form"),w=j("loading");return z((s(),d(k,{ref_key:"formRef",ref:p,model:u.value,rules:h.value,"label-width":"100px"},{default:l(()=>[n(c,{label:"\u89D2\u8272\u4EE3\u865F",prop:"code"},{default:l(()=>[m.type==="view"?(s(),C("label",ee,F(u.value.code),1)):(s(),d(b,{key:1,modelValue:u.value.code,"onUpdate:modelValue":r[0]||(r[0]=_=>u.value.code=_),clearable:""},null,8,["modelValue"]))]),_:1}),n(c,{label:"\u89D2\u8272Name",prop:"name"},{default:l(()=>[m.type==="view"?(s(),C("label",te,F(u.value.name),1)):(s(),d(b,{key:1,modelValue:u.value.name,"onUpdate:modelValue":r[1]||(r[1]=_=>u.value.name=_),clearable:""},null,8,["modelValue"]))]),_:1}),n(c,{label:"\u662F\u5426\u958B\u555F",prop:"activation"},{default:l(()=>[m.type==="view"?(s(),C("label",ae,F(u.value.activation?"\u662F":"\u5426"),1)):(s(),d(E,{key:1,modelValue:u.value.activation,"onUpdate:modelValue":r[2]||(r[2]=_=>u.value.activation=_),"active-text":"\u662F","inactive-text":"\u5426"},null,8,["modelValue"]))]),_:1}),V("div",le,[n(y,{onClick:r[3]||(r[3]=_=>v("toggleModal",!1))},{default:l(()=>[x("Close")]),_:1}),m.type!=="view"?(s(),d(y,{key:0,type:"primary",onClick:r[4]||(r[4]=_=>e(f).dispatch("saveData",{http:e(t),path:D.path,form:u.value,ref:p.value}))},{default:l(()=>[x("Save")]),_:1})):g("",!0)])]),_:1},8,["model","rules"])),[[w,e(f).state.progressing]])}}}),ne=V("div",{class:"card-header"},"Search Filter",-1),se={class:"grid sm:gap-x-8 sm:grid-cols-2"},ue={class:"card-header flex justify-between items-center"},ie=V("span",null,"Result",-1),pe=U({__name:"InfoView",setup(D){const v=B(N),m=L(),t=M(),f=S(m.path),p=P({code:"",name:""}),u=T(()=>{const h={page:t.state.page,pageSize:t.state.pageSize};return p.code.length>0&&(h.code=p.code),p.name.length>0&&(h.name=p.name),h});return(h,a)=>{const r=i("el-input"),b=i("el-form-item"),c=i("el-button"),E=i("el-form"),y=i("el-card"),k=i("el-table-column"),w=i("el-tooltip"),_=i("el-button-group"),R=i("el-table"),I=i("el-pagination"),O=i("el-space"),q=i("el-dialog"),$=j("loading");return s(),C(Q,null,[n(O,{size:20,fill:!0,class:"w-full px-4"},{default:l(()=>[z((s(),d(y,{class:"box-card"},{header:l(()=>[ne]),default:l(()=>[n(E,{"label-position":"left"},{default:l(()=>[V("div",se,[n(b,{label:"\u89D2\u8272\u4EE3\u865F",prop:"code"},{default:l(()=>[n(r,{modelValue:p.code,"onUpdate:modelValue":a[0]||(a[0]=o=>p.code=o),placeholder:"Enter \u89D2\u8272\u4EE3\u865F",clearable:""},null,8,["modelValue"])]),_:1}),n(b,{label:"\u89D2\u8272Name",prop:"name"},{default:l(()=>[n(r,{modelValue:p.name,"onUpdate:modelValue":a[1]||(a[1]=o=>p.name=o),placeholder:"Enter \u89D2\u8272Name",clearable:""},null,8,["modelValue"])]),_:1})]),e(t).state.show.read&&e(t).state.user.superUser?(s(),d(c,{key:0,icon:e(G),type:"primary",onClick:a[2]||(a[2]=o=>e(t).dispatch("getData",{http:e(v),path:f.value,data:u.value})),class:"!flex w-full sm:w-56 mx-auto"},{default:l(()=>[x("Search")]),_:1},8,["icon"])):g("",!0)]),_:1})]),_:1})),[[$,e(t).state.progressing]]),z((s(),d(y,{class:"box-card"},{header:l(()=>[V("div",ue,[ie,e(t).state.show.create&&e(t).state.user.superUser?(s(),d(c,{key:0,onClick:a[3]||(a[3]=o=>e(t).dispatch("action",{type:"add",id:0})),icon:e(H),type:"primary",plain:""},{default:l(()=>[x("Add\u89D2\u8272")]),_:1},8,["icon"])):g("",!0)])]),default:l(()=>[n(R,{data:e(t).state.table,flexible:!0,border:""},{default:l(()=>[n(k,{prop:"code",label:"\u89D2\u8272\u4EE3\u865F"}),n(k,{prop:"name",label:"\u89D2\u8272Name"}),n(k,{label:"Operate",fixed:"right",width:"150",align:"center"},{default:l(o=>[n(_,null,{default:l(()=>[e(t).state.show.detail?g("",!0):(s(),d(c,{key:0,icon:e(J),round:"",disabled:""},{default:l(()=>[x("\u7121\u6B0A\u9650")]),_:1},8,["icon"])),e(t).state.show.detail?(s(),d(w,{key:1,class:"box-item",effect:"dark",content:"\u700F\u89BD",placement:"top","hide-after":0},{default:l(()=>[n(c,{onClick:A=>e(t).dispatch("action",{type:"view",id:o.row.id}),icon:e(W)},null,8,["onClick","icon"])]),_:2},1024)):g("",!0),e(t).state.show.update?(s(),d(w,{key:2,class:"box-item",effect:"dark",content:"\u7DE8\u8F2F",placement:"top","hide-after":0},{default:l(()=>[n(c,{onClick:A=>e(t).dispatch("action",{type:"edit",id:o.row.id}),icon:e(X)},null,8,["onClick","icon"])]),_:2},1024)):g("",!0),e(t).state.show.delete?(s(),d(w,{key:3,class:"box-item",effect:"dark",content:"\u522A\u9664",placement:"top","hide-after":0},{default:l(()=>[n(c,{onClick:A=>e(t).dispatch("handleDelete",{http:e(v),path:f.value,data:u.value,row:o.row}),icon:e(Y),type:"danger",plain:""},null,8,["onClick","icon"])]),_:2},1024)):g("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data"]),e(t).state.table.length>0?(s(),d(I,{key:0,onSizeChange:a[4]||(a[4]=o=>e(t).dispatch("handleSizeChange",{http:e(v),path:f.value,data:u.value,val:o})),onCurrentChange:a[5]||(a[5]=o=>e(t).dispatch("handleCurrentChange",{http:e(v),path:f.value,data:u.value,val:o})),"current-page":e(t).state.page,"onUpdate:currentPage":a[6]||(a[6]=o=>e(t).state.page=o),"page-size":e(t).state.pageSize,"onUpdate:pageSize":a[7]||(a[7]=o=>e(t).state.pageSize=o),"page-sizes":[10,25,50,100],total:e(t).state.total,layout:"total, sizes, prev, pager, next",class:"flex flex-wrap justify-center mt-4"},null,8,["current-page","page-size","total"])):g("",!0)]),_:1})),[[$,e(t).state.progressing]])]),_:1}),n(q,{modelValue:e(t).state.modalOpen,"onUpdate:modelValue":a[9]||(a[9]=o=>e(t).state.modalOpen=o),title:e(t).getters.actionTitle,"append-to-body":!0,"close-on-click-modal":!1,width:"95%",style:{"max-width":"600px"}},{default:l(()=>[(s(),d(oe,{key:e(t).state.actionType+e(t).state.actionId,onToggleModal:a[8]||(a[8]=o=>e(t).commit("updateModalOpen",o)),type:e(t).state.actionType,id:e(t).state.actionId,path:f.value},null,8,["type","id","path"]))]),_:1},8,["modelValue","title"])],64)}}});export{pe as default};
