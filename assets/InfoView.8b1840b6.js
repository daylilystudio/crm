import{d as U,i as P,A as z,b as $,O as W,r as I,e as T,o as K,f as c,K as F,L as S,k as e,p as n,l as u,w as l,j as o,g as v,v as b,h as D,s as x,m as y,a as L,P as Q,F as G,Q as H,R as J,S as X,T as Z,U as ee,V as ae}from"./index.b0b44b5a.js";import{d as te,f as M,o as le,a as oe,v as ne}from"./mixin.fa525c43.js";import{A}from"./AddItem.df142259.js";import"./plugin-vueexport-helper.2444895f.js";const re={key:0},se={key:0},ie={key:0},ue={key:0},de={key:0},pe={key:0},me={key:0},ce={key:0},fe={key:0},ge={key:0},ve={class:"text-right"},be=U({__name:"InfoForm",props:{type:{type:String,default:"view"},id:{type:Number,default:0},path:{type:String,default:""}},emits:["toggleModal"],setup(N,{emit:h}){const m=N,t=P(z),_=$();W(()=>{te()});const f=I(),a=I({id:0,code:"",name:"",uniNo:"",address:"",principalName:"",principalPhone:"",principalEmail:"",establishDate:"",writeoffDate:null,remark:"",webItems:[],emailItems:[],phoneItems:[],faxItems:[]}),k=T(()=>({code:[{required:!0,message:"Enter  ID",trigger:"blur"},{min:6,max:10,message:"\u9577\u5EA6\u4ECB\u65BC6~10",trigger:"blur"},{validator:le,trigger:"blur"}],name:[{required:!0,message:"Enter Name",trigger:"blur"},{max:30,message:"\u6700\u5927\u9577\u5EA6\u70BA30",trigger:"blur"}],uniNo:[{required:!0,message:"Enter VAT",trigger:"blur"},{min:6,max:10,message:"\u9577\u5EA6\u4ECB\u65BC6~10",trigger:"blur"},{validator:oe,trigger:"blur"}],address:[{required:!0,message:"Enter Address",trigger:"blur"},{max:255,message:"\u6700\u5927\u9577\u5EA6\u70BA255",trigger:"blur"}],principalName:[{required:!0,message:"Enter Name",trigger:"blur"},{max:30,message:"\u6700\u5927\u9577\u5EA6\u70BA30",trigger:"blur"}],principalPhone:[{required:!0,message:"Enter Phone",trigger:"blur"},{max:50,message:"\u6700\u5927\u9577\u5EA6\u70BA50",trigger:"blur"}],principalEmail:[{required:!0,message:"Enter Email",trigger:"blur"},{max:255,message:"\u6700\u5927\u9577\u5EA6\u70BA255",trigger:"blur"},{validator:ne,trigger:"blur"}],establishDate:[{required:!0,message:"Please Choose",trigger:"change"}],writeoffDate:[]}));return K(async()=>{if(m.id>0){const s=await _.dispatch("getModalData",{http:t,path:m.path,id:m.id});s&&(a.value=s.data)}}),(s,r)=>{const g=c("el-input"),d=c("el-form-item"),E=c("el-date-picker"),w=c("el-button"),V=c("el-form"),C=F("loading");return S((n(),u(V,{ref_key:"formRef",ref:f,model:a.value,rules:k.value,"label-width":"140px"},{default:l(()=>[o(d,{label:"Company ID",prop:"code"},{default:l(()=>[m.type==="view"?(n(),v("label",re,b(a.value.code),1)):(n(),u(g,{key:1,modelValue:a.value.code,"onUpdate:modelValue":r[0]||(r[0]=i=>a.value.code=i),maxlength:"10",clearable:""},null,8,["modelValue"]))]),_:1}),o(d,{label:"Company Name",prop:"name"},{default:l(()=>[m.type==="view"?(n(),v("label",se,b(a.value.name),1)):(n(),u(g,{key:1,modelValue:a.value.name,"onUpdate:modelValue":r[1]||(r[1]=i=>a.value.name=i),clearable:""},null,8,["modelValue"]))]),_:1}),o(d,{label:"VAT Number",prop:"uniNo"},{default:l(()=>[m.type==="view"?(n(),v("label",ie,b(a.value.uniNo),1)):(n(),u(g,{key:1,modelValue:a.value.uniNo,"onUpdate:modelValue":r[2]||(r[2]=i=>a.value.uniNo=i),maxlength:"10",clearable:""},null,8,["modelValue"]))]),_:1}),o(d,{label:"Company Address",prop:"address"},{default:l(()=>[m.type==="view"?(n(),v("label",ue,b(a.value.address),1)):(n(),u(g,{key:1,modelValue:a.value.address,"onUpdate:modelValue":r[3]||(r[3]=i=>a.value.address=i),clearable:""},null,8,["modelValue"]))]),_:1}),o(d,{label:"Owner Name",prop:"principalName"},{default:l(()=>[m.type==="view"?(n(),v("label",de,b(a.value.principalName),1)):(n(),u(g,{key:1,modelValue:a.value.principalName,"onUpdate:modelValue":r[4]||(r[4]=i=>a.value.principalName=i),clearable:""},null,8,["modelValue"]))]),_:1}),o(d,{label:"Owner Phone",prop:"principalPhone"},{default:l(()=>[m.type==="view"?(n(),v("label",pe,b(a.value.principalPhone),1)):(n(),u(g,{key:1,modelValue:a.value.principalPhone,"onUpdate:modelValue":r[5]||(r[5]=i=>a.value.principalPhone=i),clearable:""},null,8,["modelValue"]))]),_:1}),o(d,{label:"Owner Email",prop:"principalEmail"},{default:l(()=>[m.type==="view"?(n(),v("label",me,b(a.value.principalEmail),1)):(n(),u(g,{key:1,modelValue:a.value.principalEmail,"onUpdate:modelValue":r[6]||(r[6]=i=>a.value.principalEmail=i),clearable:""},null,8,["modelValue"]))]),_:1}),o(d,{label:"Establish Date",prop:"establishDate"},{default:l(()=>[m.type==="view"?(n(),v("label",ce,b(e(M)(a.value.establishDate)),1)):(n(),u(E,{key:1,modelValue:a.value.establishDate,"onUpdate:modelValue":r[7]||(r[7]=i=>a.value.establishDate=i),type:"date",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD",placeholder:"Please Choose"},null,8,["modelValue"]))]),_:1}),o(d,{label:"Write-off Date",prop:"writeoffDate"},{default:l(()=>[m.type==="view"?(n(),v("label",fe,b(e(M)(a.value.writeoffDate)),1)):(n(),u(E,{key:1,modelValue:a.value.writeoffDate,"onUpdate:modelValue":r[8]||(r[8]=i=>a.value.writeoffDate=i),type:"date",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD",placeholder:"Please Choose"},null,8,["modelValue"]))]),_:1}),o(d,{label:"Remark",prop:"remark"},{default:l(()=>[m.type==="view"?(n(),v("label",ge,b(a.value.remark),1)):(n(),u(g,{key:1,modelValue:a.value.remark,"onUpdate:modelValue":r[9]||(r[9]=i=>a.value.remark=i),clearable:""},null,8,["modelValue"]))]),_:1}),o(d,{label:"Company Website"},{default:l(()=>[o(A,{arrays:a.value.webItems,"label-title":"Website","can-save":m.type!=="view",ref:"web"},null,8,["arrays","can-save"])]),_:1}),o(d,{label:"Company Email"},{default:l(()=>[o(A,{arrays:a.value.emailItems,"label-title":"Email","can-save":m.type!=="view",keyWord:"email",ref:"email"},null,8,["arrays","can-save"])]),_:1}),o(d,{label:"Company Phone"},{default:l(()=>[o(A,{arrays:a.value.phoneItems,"label-title":"Phone","can-save":m.type!=="view",ref:"phone"},null,8,["arrays","can-save"])]),_:1}),o(d,{label:"Company Fax"},{default:l(()=>[o(A,{arrays:a.value.faxItems,"label-title":"Fax","can-save":m.type!=="view",ref:"fax"},null,8,["arrays","can-save"])]),_:1}),D("div",ve,[o(w,{onClick:r[10]||(r[10]=i=>h("toggleModal",!1))},{default:l(()=>[x("Close")]),_:1}),m.type!=="view"?(n(),u(w,{key:0,type:"primary",onClick:r[11]||(r[11]=i=>e(_).dispatch("saveData",{http:e(t),path:N.path,form:a.value,ref:f.value}))},{default:l(()=>[x("Save")]),_:1})):y("",!0)])]),_:1},8,["model","rules"])),[[C,e(_).state.progressing]])}}}),_e=D("div",{class:"card-header"},"Search Filter",-1),ye={class:"grid sm:gap-x-8 sm:grid-cols-2"},he={class:"card-header flex justify-between items-center"},ke=D("span",null,"Result",-1),De=U({__name:"InfoView",setup(N){const h=P(z),m=L(),t=$(),_=I(m.path),f=Q({code:"",name:""}),a=T(()=>{const k={page:t.state.page,pageSize:t.state.pageSize};return f.code.length>0&&(k.code=f.code),f.name.length>0&&(k.name=f.name),k});return t.commit("updateTable",[{code:"1111",name:"TEST"}]),(k,s)=>{const r=c("el-input"),g=c("el-form-item"),d=c("el-button"),E=c("el-form"),w=c("el-card"),V=c("el-table-column"),C=c("el-tooltip"),i=c("el-button-group"),q=c("el-table"),O=c("el-pagination"),R=c("el-space"),j=c("el-dialog"),Y=F("loading");return n(),v(G,null,[o(R,{size:20,fill:!0,class:"w-full px-4"},{default:l(()=>[S((n(),u(w,{class:"box-card"},{header:l(()=>[_e]),default:l(()=>[o(E,{"label-position":"left"},{default:l(()=>[D("div",ye,[o(g,{label:"Company ID",prop:"code"},{default:l(()=>[o(r,{modelValue:f.code,"onUpdate:modelValue":s[0]||(s[0]=p=>f.code=p),placeholder:"Enter Company ID",maxlength:"10",clearable:""},null,8,["modelValue"])]),_:1}),o(g,{label:"Company Name",prop:"name"},{default:l(()=>[o(r,{modelValue:f.name,"onUpdate:modelValue":s[1]||(s[1]=p=>f.name=p),placeholder:"Enter Company Name",clearable:""},null,8,["modelValue"])]),_:1})]),e(t).state.show.read?(n(),u(d,{key:0,icon:e(H),type:"primary",onClick:s[2]||(s[2]=p=>e(t).dispatch("getData",{http:e(h),path:_.value,data:a.value})),class:"!flex w-full sm:w-56 mx-auto"},{default:l(()=>[x("Search")]),_:1},8,["icon"])):y("",!0)]),_:1})]),_:1})),[[Y,e(t).state.progressing]]),S((n(),u(w,{class:"box-card"},{header:l(()=>[D("div",he,[ke,e(t).state.show.create?(n(),u(d,{key:0,onClick:s[3]||(s[3]=p=>e(t).dispatch("action",{type:"add",id:0})),icon:e(J),type:"primary",plain:""},{default:l(()=>[x("Add Company")]),_:1},8,["icon"])):y("",!0)])]),default:l(()=>[o(q,{data:e(t).state.table,flexible:!0,border:""},{default:l(()=>[o(V,{prop:"code",label:"Company ID"}),o(V,{prop:"name",label:"Company Name"}),o(V,{label:"Operate",fixed:"right",width:"150",align:"center"},{default:l(p=>[o(i,null,{default:l(()=>[e(t).state.show.detail?y("",!0):(n(),u(d,{key:0,icon:e(X),round:"",disabled:""},{default:l(()=>[x("\u7121\u6B0A\u9650")]),_:1},8,["icon"])),e(t).state.show.detail?(n(),u(C,{key:1,class:"box-item",effect:"dark",content:"\u700F\u89BD",placement:"top","hide-after":0},{default:l(()=>[o(d,{onClick:B=>e(t).dispatch("action",{type:"view",id:p.row.id}),icon:e(Z)},null,8,["onClick","icon"])]),_:2},1024)):y("",!0),e(t).state.show.update?(n(),u(C,{key:2,class:"box-item",effect:"dark",content:"\u7DE8\u8F2F",placement:"top","hide-after":0},{default:l(()=>[o(d,{onClick:B=>e(t).dispatch("action",{type:"edit",id:p.row.id}),icon:e(ee)},null,8,["onClick","icon"])]),_:2},1024)):y("",!0),e(t).state.show.delete?(n(),u(C,{key:3,class:"box-item",effect:"dark",content:"\u522A\u9664",placement:"top","hide-after":0},{default:l(()=>[o(d,{onClick:B=>e(t).dispatch("handleDelete",{http:e(h),path:_.value,data:a.value,row:p.row}),icon:e(ae),type:"danger",plain:""},null,8,["onClick","icon"])]),_:2},1024)):y("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data"]),e(t).state.table.length>0?(n(),u(O,{key:0,onSizeChange:s[4]||(s[4]=p=>e(t).dispatch("handleSizeChange",{http:e(h),path:_.value,data:a.value,val:p})),onCurrentChange:s[5]||(s[5]=p=>e(t).dispatch("handleCurrentChange",{http:e(h),path:_.value,data:a.value,val:p})),"current-page":e(t).state.page,"onUpdate:currentPage":s[6]||(s[6]=p=>e(t).state.page=p),"page-size":e(t).state.pageSize,"onUpdate:pageSize":s[7]||(s[7]=p=>e(t).state.pageSize=p),"page-sizes":[10,25,50,100],total:e(t).state.total,layout:"total, sizes, prev, pager, next",class:"flex flex-wrap justify-center mt-4"},null,8,["current-page","page-size","total"])):y("",!0)]),_:1})),[[Y,e(t).state.progressing]])]),_:1}),o(j,{modelValue:e(t).state.modalOpen,"onUpdate:modelValue":s[9]||(s[9]=p=>e(t).state.modalOpen=p),title:e(t).getters.actionTitle,"append-to-body":!0,"close-on-click-modal":!1,width:"95%",style:{"max-width":"600px"}},{default:l(()=>[(n(),u(be,{key:e(t).state.actionType+e(t).state.actionId,onToggleModal:s[8]||(s[8]=p=>e(t).commit("updateModalOpen",p)),type:e(t).state.actionType,id:e(t).state.actionId,path:_.value},null,8,["type","id","path"]))]),_:1},8,["modelValue","title"])],64)}}});export{De as default};
